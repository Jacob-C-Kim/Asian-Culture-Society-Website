title = "ACS-Workspace gitleaks config"

# Global allowlist to cut noise / known-safe patterns
[allowlist]
description = "Allow CI indirections, lockfiles, helper scripts, and obvious examples."

# Ignore common noisy/binary paths (regex)
paths = [
  '''^\.husky/''',
  '''^pnpm-lock\.yaml$''',
  '''^yarn\.lock$''',
  '''^package-lock\.json$''',
  '''^tools/scan-.*\.sh$''',
  '''^tools/java/GrantRole\.java$'''   # contains instructional DSN examples
]

# Ignore lines where values clearly come from GitHub Actions indirection
# or are well-known local test values.
regexes = [
  # GitHub Actions: ${{ secrets.X }} / ${{ vars.X }}
  '''\{\{\s*(secrets|vars)\.[A-Za-z0-9_]+\s*\}\}''',

  # Shell indirection: $FOO / ${FOO}
  '''[=:]\s*\$[{]?[A-Za-z_][A-Za-z0-9_]*[}]?''',

  # Local dev/test DSN we reference in docs/CI vars
  '''(?i)postgres(?:ql)?:\/\/acs:acs@localhost:5432\/acs(\?schema=public)?''',

  # Common "example" language
  '''(?i)\b(e\.g\.|example)\b'''
]
